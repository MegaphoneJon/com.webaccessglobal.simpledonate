<!--
Controller: DonationAngCtrl
-->
<form name="quickDonationForm" id="quickDonationForm" role="form" novalidate>
  <div class="crm-block crm-form-block quickDonationForm">

    <!--Price field Block-->
    <fieldset class="priceset-group form-section" ng-show="selectedSection(1)">
      <legend class="form-head"><span class="form-step">1</span> Choose an amount to donate:</legend>
      <div>
        <div class="priceSetMessage" ng-hide="hidePriceVal">Donation amount: {{currencySymbol}} {{message}}</div>
        <ul class="priceSet" >
          <li class="pull-left" ng-click="amountSelected(price.amount)" ng-mouseover="amounthover(price.amount)" ng-repeat="price in priceListInfo">
            <input ng-model="formInfo.donateAmount" type="radio" name="donate-amount" data-parsley-multiple="donate-amount" value="{{price.amount}}"/><label ng-class="{'active':amountActive(price.amount)}" for="pricelist">{{currencySymbol}} {{price.amount}}</label>
          </li>
          <li class="pull-left" ng-if="otherAmount">
            <input ng-model="formInfo.otherAmount" class="form-control" type="text" placeholder="{{currencySymbol}} Other" />
          </li>
        </ul>
      </div>
    </fieldset>

    <!--User Information-->
    <fieldset class="user-info-group form-section" ng-show="selectedSection(2)">
      <legend class="form-head"><span class="form-step">2</span> Enter your information:</legend>
      <div class="form-group field-container">
        <label>Full Name</label>
        <input type="text" class="form-control" ng-model="formInfo.user" data-parsley-validation-threshold="0" data-parsley-pattern="\ " pattern="\ " data-parsley-trigger="keyup" placeholder="Firstname Lastname" required />
      </div>
      <div class="form-group field-container">
        <label>E-mail</label>
        <input type="email" class="form-control" ng-model="formInfo.email" data-parsley-validation-threshold="0" data-parsley-trigger="keyup" placeholder="your@email.com" required />
      </div>
      <div class="form-group field-container">
        <label>Address</label>
        <input type="text" class="form-control" ng-model="formInfo.address" data-parsley-validation-threshold="0" data-parsley-trigger="keyup" placeholder="123 Main St, Apt 2" required />
      </div>
      <div class="form-group field-container">
        <label>ZIP</label>
        <input zip-code-info  data-parsley-type="number" data-parsley-validation-threshold="0" data-parsley-minlength="5" class="form-control" data-parsley-trigger="keyup" ng-model="formInfo.zip" placeholder="15201" required />
      </div>
      <div class="form-group field-container">
        <label>City</label>
        <input type="text" class="form-control" ng-model="formInfo.city" data-parsley-validation-threshold="0" data-parsley-trigger="focusin focusout" id="city" placeholder="Pittsburgh" required />
      </div>
      <div class="form-group field-container">
        <label>State</label>
        <input type="text" class="form-control" ng-model="formInfo.state" data-parsley-validation-threshold="0" data-parsley-trigger="focusin focusout" id="state" placeholder="PA" required />
      </div>
    </fieldset>


    <!--Credit Card Information-->
    <fieldset class="payment-processor-gr form-section" ng-show="selectedSection(3)">
      <legend class="form-head"><span class="form-step">3</span> Credit Card Information</legend>

      <div class="form-group payment-processor-block">
        <ul class="paymentProcessor">
          <li class="payment-processor-type" ng-repeat="type in paymentProcessor">
            <input class="form-radio" ng-model="formInfo.payment_processor" type="radio" name="{{type.payment_processor}}" data-parsley-multiple="payment-processor" value="{{type.id}}" ng-change="setPaymentBlock({{type.id}})"/>
<label class="control-label">{{type.name}}</label>
          </li>
	</ul>
      </div>

      <div class="payment-block credit-card-fields-block payment-processor-group" ng-show="creditType">
        <div class="crm-section credit_card_type-section">
          <div class="crm-credit_card_type-icons">
            <a class="crm-credit_card_type-icon-visa" title="Visa" ng-show='"visa"==selectedRow'><span>Visa</span></a>
            <a class="crm-credit_card_type-icon-mastercard" title="MasterCard" ng-show='"mastercard"==selectedRow'><span>MasterCard</span></a>
            <a class="crm-credit_card_type-icon-amex" title="Amex" ng-show='"amex"==selectedRow'><span>Amex</span></a>
            <a class="crm-credit_card_type-icon-discover" title="Discover" ng-show='"discover"==selectedRow'><span>Discover</span></a>
            <a class="crm-credit_card_type-icon-cvv2-icon cvv2-icon" title="CVV" ng-show='"cvv2"==selectedRow'><span>CVV</span></a>
          </div>
        </div>
        <div class="form-group single-input-block" ng-class="{ 'has-error' : quickDonationForm.cardNumber.$invalid && !quickDonationForm.cardNumber.$pristine }">
          <label>Card Number</label>
          <input type="text" name="cardNumber" class="form-control cardNumber" ng-model="formInfo.cardNumberValue" data-encrypted-name="cardNumber" required data-credit-card-type  data-ng-minlength="19" data-ng-maxlength="19" autocomplete="off" data-parsley-errors-container=".errorBlock" placeholder="1234 5678 9012 3456"/>
        </div>
        <div class="form-group single-input-block" ng-show="quickDonationForm.cardNumber.$valid && !quickDonationForm.cardNumber.$pristine " ng-class="{ 'has-error' : quickDonationForm.cardExpiry.$invalid && !quickDonationForm.cardExpiry.$pristine }">
          <label>Expiration Date </label>
          <input placeholder="MM/YY" data-ng-pattern="/^[0-9]*/" type="text" ng-model="formInfo.cardExpiry" class="form-control" data-ng-minlength="4"  id="card-expiration" name="cardExpiry" required data-credit-card-expiry data-parsley-errors-container=".errorBlock">
        </div>
        <div class="form-group single-input-block" ng-class="{'has-error':quickDonationForm.securityCode.$invalid && !quickDonationForm.securityCode.$pristine}" ng-show="quickDonationForm.cardNumber.$valid && !quickDonationForm.cardNumber.$pristine ">
          <label>Security Code </label>
          <input type="text" name="securityCode"  id="securityCode" class="form-control" ng-model="formInfo.securityCode" required data-ng-pattern="/^[0-9]+$/" data-ng-minlength="3" maxlength="3" autocomplete="off" ng-focus="selectedCardType('cvv2')" data-parsley-errors-container=".errorBlock" placeholder="CVV" data-security-code>
        </div>
        <div class="form-group single-input-block" ng-class="{'has-error' :quickDonationForm.zipCode.$invalid && !quickDonationForm.zipCode.$pristine}" ng-show="quickDonationForm.cardNumber.$valid && !quickDonationForm.cardNumber.$pristine ">
          <label>ZIP Code</label>
          <input type="text" name="zip" id="zip" class="form-control" ng-model="formInfo.zipCode" required data-ng-pattern="/^[0-9]+$/" data-ng-length="4" autocomplete="off" data-parsley-errors-container=".errorBlock" placeholder="ZIP" />
        </div>
      </div>
      <div class="payment-block direct-debit-fields-block" ng-show="directDebitType">
      </div>
      <div class="payment-block hidden-block" ng-show="hiddenProcessor">
	<input name="hidden_processor" type="hidden" value="1" />
      </div>
      <div class="errorBlock"></div>
    </fieldset>
    <button type="button" class="donate-sub" ng-click="sectionShow()" ng-hide="section === 3">Next Step</button>
    <!-- SUBMIT BUTTON -->
    <button class="donate-submit-btn" ng-click="saveData()" loading-text="Saving..." enable-button="quickDonationForm.$pristine" ng-show="selectedSection(3)" submit-button > Complete Donation</button>

  </div>
</form>

